(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{211:function(e,t,s){Promise.resolve().then(s.bind(s,8362))},8362:function(e,t,s){"use strict";s.d(t,{LessonLogList:function(){return a}});var o=s(7437),n=s(2265);function a(e){let{initialLessons:t,messages:s}=e,[a,l]=(0,n.useState)(t),[r,c]=(0,n.useState)({}),[i,d]=(0,n.useState)(""),m=async e=>{c(t=>({...t,[e]:!0})),d("");try{if(!(await fetch("/api/tutor/lessons/".concat(e,"/complete"),{method:"POST"})).ok)throw Error("Failed to mark as complete");l(t=>t.map(t=>t.id===e?{...t,status:"completed"}:t))}catch(e){d(s.common.errors.generic)}finally{c(t=>({...t,[e]:!1}))}};return 0===a.length?(0,o.jsx)("p",{className:"text-gray-600 bg-white p-6 rounded-md shadow-sm border",children:s.tutor_flow.lesson_log_page.no_lessons}):(0,o.jsxs)("div",{className:"space-y-4",children:[i&&(0,o.jsx)("p",{className:"text-sm text-center text-red-600 mb-4",children:i}),a.map(e=>(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,o.jsxs)("div",{className:"flex-grow",children:[(0,o.jsxs)("p",{className:"font-bold text-lg text-gray-800",children:[e.lesson_label," - ",e.student_name]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.confirmed_start_at_utc).toLocaleString()})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[(0,o.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:s.tutor_flow.lesson_log_page.status[e.status]}),"confirmed"===e.status&&(0,o.jsx)("button",{onClick:()=>m(e.id),disabled:r[e.id],className:"px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50",children:r[e.id]?s.common.loading:s.tutor_flow.lesson_log_page.actions.mark_complete})]})]},e.id))]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=211)}),_N_E=e.O()}]);