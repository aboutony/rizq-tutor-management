(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{8823:function(e,t,s){Promise.resolve().then(s.bind(s,802))},802:function(e,t,s){"use strict";s.d(t,{RescheduleList:function(){return i}});var r=s(7437),n=s(2265);function i(e){let{initialRequests:t,messages:s}=e,[i,o]=(0,n.useState)(t),[d,a]=(0,n.useState)({}),[l,c]=(0,n.useState)(""),m=async(e,t)=>{a(t=>({...t,[e]:!0})),c("");try{if(!(await fetch("/api/tutor/reschedules/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t})})).ok)throw Error("Failed to update request");o(t=>t.filter(t=>t.request_id!==e))}catch(e){c(s.common.errors.generic)}finally{a(t=>({...t,[e]:!1}))}};return 0===i.length?(0,r.jsx)("p",{className:"text-gray-600 bg-white p-6 rounded-md shadow-sm border",children:s.tutor_flow.reschedules.no_requests}):(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)("p",{className:"text-sm text-center text-red-600 mb-4",children:l}),i.map(e=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("p",{className:"font-bold text-lg text-gray-800",children:[e.lesson_label," - ",e.student_name]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:[s.tutor_flow.reschedules.original_time,": ",(0,r.jsx)("span",{className:"font-medium line-through",children:new Date(e.original_time_utc).toLocaleString()})]}),(0,r.jsxs)("p",{children:[s.tutor_flow.reschedules.proposed_time,": ",(0,r.jsx)("span",{className:"font-medium text-indigo-600",children:new Date(e.proposed_time_utc).toLocaleString()})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[(0,r.jsx)("button",{onClick:()=>m(e.request_id,"decline"),disabled:d[e.request_id],className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 disabled:opacity-50",children:s.common.actions.decline}),(0,r.jsx)("button",{onClick:()=>m(e.request_id,"approve"),disabled:d[e.request_id],className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 disabled:opacity-50",children:d[e.request_id]?s.common.loading:s.common.actions.approve})]})]},e.request_id))]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8823)}),_N_E=e.O()}]);