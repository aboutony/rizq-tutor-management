(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{2244:function(e,t,n){Promise.resolve().then(n.bind(n,2006))},2006:function(e,t,n){"use strict";n.d(t,{LoginForm:function(){return i}});var o=n(7437),r=n(2265),s=n(6463);function i(e){let{messages:t}=e,[n,i]=(0,r.useState)("phone"),[a,u]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[l,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),b=(0,s.useRouter)(),x=async e=>{e.preventDefault(),g(""),p(""),m(!0);let n=await fetch("/api/auth/otp/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a})});m(!1),n.ok?(p(t.code_sent),i("otp")):404===n.status?g(t.error_tutor_not_found):429===n.status?g(t.error_rate_limit):g(t.error_generic)},y=async e=>{e.preventDefault(),g(""),m(!0);let n=await fetch("/api/auth/otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a,code:d})});m(!1),n.ok?b.replace("/tutor/dashboard"):401===n.status?g(t.error_invalid_code):g(t.error_generic)};return(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md border border-gray-200",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-700 mb-6",children:t.title}),"phone"===n?(0,o.jsxs)("form",{onSubmit:x,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:t.phone_label}),(0,o.jsx)("input",{type:"tel",id:"phone",name:"phone",value:a,onChange:e=>u(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"+9613123456"})]}),(0,o.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:l?t.sending_code:t.send_code_button})]}):(0,o.jsxs)("form",{onSubmit:y,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:t.otp_label}),(0,o.jsx)("input",{type:"text",id:"code",name:"code",value:d,onChange:e=>c(e.target.value),required:!0,inputMode:"numeric",maxLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center tracking-[0.5em]"})]}),(0,o.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:l?t.verifying:t.verify_button})]}),h&&(0,o.jsx)("p",{className:"mt-4 text-sm text-center text-red-600",children:h}),f&&(0,o.jsx)("p",{className:"mt-4 text-sm text-center text-green-600",children:f}),"otp"===n&&(0,o.jsx)("button",{onClick:()=>{i("phone"),g(""),p("")},className:"mt-4 text-sm text-center text-gray-600 hover:text-indigo-500 w-full",children:"Change phone number"})]})}},6463:function(e,t,n){"use strict";var o=n(1169);n.o(o,"useParams")&&n.d(t,{useParams:function(){return o.useParams}}),n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2244)}),_N_E=e.O()}]);