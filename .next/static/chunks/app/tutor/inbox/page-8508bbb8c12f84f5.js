(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{5437:function(e,t,s){Promise.resolve().then(s.bind(s,3363))},3363:function(e,t,s){"use strict";s.d(t,{RequestList:function(){return o}});var n=s(7437),a=s(2265);function o(e){let{initialRequests:t,messages:s}=e,[o,r]=(0,a.useState)(t),[i,c]=(0,a.useState)({}),[d,l]=(0,a.useState)(""),m=async(e,t)=>{c(t=>({...t,[e]:!0})),l("");try{if(!(await fetch("/api/tutor/requests/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t})})).ok)throw Error("Failed to update request");if(r(t=>t.filter(t=>t.id!==e)),"accept"===t){let t=o.find(t=>t.id===e);if(t){let e="Hi! Your lesson for ".concat(t.student_name," (").concat(t.lesson_type_label,") on ").concat(new Date(t.requested_start_at_utc).toLocaleString()," is confirmed."),s="https://wa.me/?text=".concat(encodeURIComponent(e));window.open(s,"_blank")}}}catch(e){l(s.common.errors.generic)}finally{c(t=>({...t,[e]:!1}))}};return 0===o.length?(0,n.jsx)("p",{className:"text-gray-600 bg-white p-6 rounded-md shadow-sm border",children:s.tutor_flow.inbox.no_requests}):(0,n.jsxs)("div",{className:"space-y-4",children:[d&&(0,n.jsx)("p",{className:"text-sm text-center text-red-600 mb-4",children:d}),o.map(e=>(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsxs)("div",{className:"flex-grow",children:[(0,n.jsx)("p",{className:"font-bold text-lg text-gray-800",children:e.lesson_type_label}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[s.tutor_flow.inbox.student,": ",(0,n.jsx)("span",{className:"font-medium",children:e.student_name})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.requested_start_at_utc).toLocaleString()}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:s.tutor_flow.inbox.duration.replace("{minutes}",e.duration_minutes.toString())})]}),(0,n.jsxs)("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[(0,n.jsx)("button",{onClick:()=>m(e.id,"reject"),disabled:i[e.id],className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 disabled:opacity-50",children:s.common.actions.reject}),(0,n.jsx)("button",{onClick:()=>m(e.id,"accept"),disabled:i[e.id],className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 disabled:opacity-50",children:i[e.id]?s.common.loading:s.common.actions.accept})]})]},e.id))]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5437)}),_N_E=e.O()}]);