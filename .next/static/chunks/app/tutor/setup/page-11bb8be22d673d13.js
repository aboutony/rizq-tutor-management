(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[880],{1444:function(e,t,s){Promise.resolve().then(s.bind(s,1796))},1796:function(e,t,s){"use strict";s.d(t,{SetupFlow:function(){return x}});var a=s(7437),n=s(2265),l=s(6463);let i=[{key:"academic",label:"Math"},{key:"music",label:"Piano"},{key:"language",label:"Language"},{key:"fine_arts",label:"Fine Arts"}];function r(e){let{messages:t,commonMessages:s,onSuccess:l}=e,[r,o]=(0,n.useState)(""),[c,d]=(0,n.useState)({}),[u,m]=(0,n.useState)(!1),[x,p]=(0,n.useState)(""),g=e=>{let{name:t,checked:s}=e.target;d(e=>({...e,[t]:s}))},h=async e=>{e.preventDefault(),p("");let t=i.filter(e=>c[e.label]).map(e=>({category:e.key,label:e.label}));if(0===t.length){p("Please select at least one lesson type.");return}m(!0);let s=await fetch("/api/tutor/setup/step1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,lessonTypes:t})});m(!1),s.ok?l((await s.json()).lessonTypes):p("An error occurred. Please try again.")};return(0,a.jsxs)("form",{onSubmit:h,children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:t.step_1_title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:t.step_1_subtitle}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:t.name_label}),(0,a.jsx)("input",{type:"text",id:"name",value:r,onChange:e=>o(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t.lesson_types_label}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:i.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 p-3 border rounded-md hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"checkbox",name:e.label,checked:!!c[e.label],onChange:g,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,a.jsx)("span",{children:t.lesson_types[e.label.toLowerCase().replace(" ","_")]||e.label})]},e.key))})]}),x&&(0,a.jsx)("p",{className:"mb-4 text-sm text-center text-red-600",children:x}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:u?t.saving:s.actions.continue})]})}let o=[30,45,60];function c(e){let{messages:t,commonMessages:s,lessonTypes:l,onSuccess:i}=e,[r,c]=(0,n.useState)({}),[d,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),p=(e,t,s)=>{c(a=>({...a,[e]:{...a[e],[t]:s}}))},g=async e=>{e.preventDefault(),x(""),u(!0);let t=[];for(let e in r)for(let s in r[e]){let a=parseFloat(r[e][s]);!isNaN(a)&&a>0&&t.push({lessonTypeId:e,duration:parseInt(s),amount:a})}let s=await fetch("/api/tutor/setup/step2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:t})});u(!1),s.ok?i():x("An error occurred. Please try again.")};return(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:t.step_2_title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:t.step_2_subtitle}),(0,a.jsx)("div",{className:"space-y-6",children:l.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-md font-medium text-gray-900",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:t.price_per_duration}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:o.map(s=>{var n;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"".concat(e.id,"-").concat(s),className:"block text-sm font-medium text-gray-700",children:t.duration_minutes.replace("{minutes}",s.toString())}),(0,a.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,a.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),(0,a.jsx)("input",{type:"number",id:"".concat(e.id,"-").concat(s),value:(null===(n=r[e.id])||void 0===n?void 0:n[s])||"",onChange:t=>p(e.id,s,t.target.value),className:"w-full pl-7 pr-2 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00",min:"0",step:"0.01"})]})]},s)})})]},e.id))}),m&&(0,a.jsx)("p",{className:"mt-6 text-sm text-center text-red-600",children:m}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"mt-8 w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:d?t.saving:s.actions.continue})]})}let d=[{label:"mon",value:1},{label:"tue",value:2},{label:"wed",value:3},{label:"thu",value:4},{label:"fri",value:5},{label:"sat",value:6},{label:"sun",value:0}],u=Array.from({length:13},(e,t)=>"".concat(t+8,":00"));function m(e){let{messages:t,commonMessages:s,onSuccess:l}=e,[i,r]=(0,n.useState)({}),[o,c]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),p=(e,t)=>{let s="".concat(e,"-").concat(t);r(e=>({...e,[s]:!e[s]}))},g=async e=>{e.preventDefault(),x(""),c(!0);let t=Object.keys(i).filter(e=>i[e]).map(e=>{let[t,s]=e.split("-");return{day:parseInt(t),time:s}}),s=await fetch("/api/tutor/setup/step3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({availability:t})});c(!1),s.ok?l():x("An error occurred. Please try again.")};return(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:t.step_3_title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:t.step_3_subtitle}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:t.availability_instructions}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),d.map(e=>(0,a.jsx)("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.days[e.label]},e.value))]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium text-gray-500",children:e}),d.map(t=>(0,a.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer",checked:!!i["".concat(t.value,"-").concat(e)],onChange:()=>p(t.value,e)})},t.value))]},e))})]})}),m&&(0,a.jsx)("p",{className:"mt-6 text-sm text-center text-red-600",children:m}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"mt-8 w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:o?t.saving:s.actions.save_and_finish})]})}function x(e){let{messages:t}=e,[s,i]=(0,n.useState)(1),[o,d]=(0,n.useState)([]),u=(0,l.useRouter)();return(0,a.jsxs)("div",{className:"mt-8 bg-white p-8 rounded-lg shadow-md border border-gray-200",children:[1===s&&(0,a.jsx)(r,{messages:t.tutor_flow.setup,commonMessages:t.common,onSuccess:e=>{d(e),i(2)}}),2===s&&(0,a.jsx)(c,{messages:t.tutor_flow.setup,commonMessages:t.common,lessonTypes:o,onSuccess:()=>{i(3)}}),3===s&&(0,a.jsx)(m,{messages:t.tutor_flow.setup,commonMessages:t.common,onSuccess:()=>{u.replace("/tutor/dashboard")}})]})}},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1444)}),_N_E=e.O()}]);