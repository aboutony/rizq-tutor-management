(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{3957:function(e,n,t){Promise.resolve().then(t.bind(t,442))},442:function(e,n,t){"use strict";t.d(n,{CancellationForm:function(){return o}});var s=t(7437),l=t(2265);function o(e){let{lessonDetails:n,messages:t,token:o}=e,[a,c]=(0,l.useState)(!1),[r,i]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),f=new Date(n.confirmed_start_at_utc||new Date),u=new Date,h=(f.getTime()-u.getTime())/36e5<(n.cutoff_hours||0),b=async()=>{c(!0),i("");let e=await fetch("/api/public/lessons/".concat(n.lesson_id,"/cancel"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})});c(!1),e.ok?m(!0):i((await e.json()).message||t.common.errors.generic)};return d?(0,s.jsx)("div",{className:"bg-white p-8 rounded-lg shadow-md border text-center",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:t.parent_flow.cancellation.success_message})}):(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md border text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:t.parent_flow.cancellation.confirm_title}),(0,s.jsxs)("div",{className:"text-left bg-gray-50 p-4 rounded-md mb-6",children:[(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[t.parent_flow.cancellation.student,":"]})," ",n.student_name]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[t.parent_flow.cancellation.lesson,":"]})," ",n.lesson_label]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[t.parent_flow.cancellation.time,":"]})," ",f.toLocaleString()]})]}),h&&(0,s.jsx)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6",role:"alert",children:(0,s.jsx)("p",{className:"font-bold",children:t.parent_flow.cancellation.late_warning.replace("{hours}",(n.cutoff_hours||0).toString())})}),r&&(0,s.jsx)("p",{className:"text-sm text-center text-red-600 mb-4",children:r}),(0,s.jsx)("button",{onClick:b,disabled:a,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400",children:a?t.common.loading:t.common.actions.confirm_cancellation})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3957)}),_N_E=e.O()}]);