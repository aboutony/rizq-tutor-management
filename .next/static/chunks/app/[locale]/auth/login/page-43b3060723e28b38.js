(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{8267:function(e,t,r){Promise.resolve().then(r.bind(r,6811))},6811:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),n=r(2265),i=r(5153),s=r(6463),o=r(9833);let l=[{code:"+961",country:"LB",label:"\uD83C\uDDF1\uD83C\uDDE7 +961"},{code:"+966",country:"SA",label:"\uD83C\uDDF8\uD83C\uDDE6 +966"},{code:"+971",country:"AE",label:"\uD83C\uDDE6\uD83C\uDDEA +971"},{code:"+33",country:"FR",label:"\uD83C\uDDEB\uD83C\uDDF7 +33"},{code:"+1",country:"US",label:"\uD83C\uDDFA\uD83C\uDDF8 +1"},{code:"+44",country:"UK",label:"\uD83C\uDDEC\uD83C\uDDE7 +44"},{code:"+962",country:"JO",label:"\uD83C\uDDEF\uD83C\uDDF4 +962"},{code:"+20",country:"EG",label:"\uD83C\uDDEA\uD83C\uDDEC +20"}];function c(){let e=(0,i.T)("auth"),t=(0,i.T)("common"),r=(0,s.useParams)(),c=(0,s.useRouter)(),u=r.locale,[d,m]=(0,n.useState)("+961"),[h,x]=(0,n.useState)(""),[p,f]=(0,n.useState)("TUTOR"),[g,b]=(0,n.useState)(!1),[D,y]=(0,n.useState)(""),v=async t=>{t.preventDefault(),b(!0),y("");try{let t="".concat(d).concat(h.replace(/\D/g,"")),r=await fetch("/api/auth/otp/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:t,role:p})});if(r.ok)sessionStorage.setItem("rizq_auth_phone",t),sessionStorage.setItem("rizq_auth_role",p),c.replace("/".concat(u,"/auth/verify"));else{let t=await r.json();429===r.status?y(e("error_rate_limit")):404===r.status?y(e("error_not_found")):y(t.message||e("error_generic"))}}catch(t){y(e("error_generic"))}finally{b(!1)}};return(0,a.jsxs)("main",{className:"min-h-screen bg-rizq-surface flex flex-col items-center justify-center px-4 py-8",children:[(0,a.jsx)("div",{className:"fixed top-4 right-4 rtl:right-auto rtl:left-4 z-50",children:(0,a.jsx)(o.T,{})}),(0,a.jsxs)("div",{className:"w-full max-w-sm animate-fade-in",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-rizq-primary tracking-tight",children:t("app_name")}),(0,a.jsx)("p",{className:"mt-2 text-rizq-text-muted text-sm",children:e("login_title")})]}),(0,a.jsx)("div",{className:"card space-y-6",children:(0,a.jsxs)("form",{onSubmit:v,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-rizq-text-muted mb-2",children:e("select_role")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>f("TUTOR"),className:"px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200\n                    ".concat("TUTOR"===p?"bg-rizq-primary text-white shadow-lg shadow-rizq-primary/25":"bg-rizq-input-bg text-rizq-text-muted border border-rizq-border hover:border-rizq-primary"),children:e("role_tutor")}),(0,a.jsx)("button",{type:"button",onClick:()=>f("STUDENT_PARENT"),className:"px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200\n                    ".concat("STUDENT_PARENT"===p?"bg-rizq-primary text-white shadow-lg shadow-rizq-primary/25":"bg-rizq-input-bg text-rizq-text-muted border border-rizq-border hover:border-rizq-primary"),children:e("role_student_parent")})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone-input",className:"block text-sm font-medium text-rizq-text-muted mb-2",children:e("phone_label")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{id:"country-code-select",value:d,onChange:e=>m(e.target.value),className:"input-field w-28 shrink-0 text-sm",children:l.map(e=>(0,a.jsx)("option",{value:e.code,children:e.label},e.code))}),(0,a.jsx)("input",{id:"phone-input",type:"tel",inputMode:"numeric",pattern:"[0-9]*",placeholder:e("phone_placeholder"),value:h,onChange:e=>x(e.target.value),className:"input-field flex-1",autoComplete:"tel",required:!0})]})]}),D&&(0,a.jsx)("div",{className:"bg-rizq-danger/10 border border-rizq-danger/20 text-rizq-danger rounded-xl px-4 py-3 text-sm animate-fade-in",children:D}),(0,a.jsx)("button",{type:"submit",disabled:g||!h.trim(),className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:g?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),(0,a.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",className:"opacity-75"})]}),e("sending")]}):e("send_otp")})]})}),(0,a.jsx)("div",{className:"mt-6 flex justify-center gap-4",children:["en","ar","fr"].map(e=>(0,a.jsx)("a",{href:"/".concat(e,"/auth/login"),className:"text-sm font-medium transition-colors duration-200 ".concat(u===e?"text-rizq-primary":"text-rizq-text-muted hover:text-rizq-text"),children:"en"===e?"English":"ar"===e?"العربية":"Fran\xe7ais"},e))})]})]})}},2943:function(e,t,r){"use strict";r.d(t,{F:function(){return s},ThemeProvider:function(){return o}});var a=r(7437),n=r(2265);let i=(0,n.createContext)({theme:"light",toggle:()=>{}});function s(){return(0,n.useContext)(i)}function o(e){let{children:t}=e,[r,s]=(0,n.useState)("light"),[o,l]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{l(!0);let e=localStorage.getItem("rizq-theme");e&&("light"===e||"dark"===e)?(s(e),document.documentElement.classList.toggle("dark","dark"===e)):window.matchMedia("(prefers-color-scheme: dark)").matches&&(s("dark"),document.documentElement.classList.add("dark"))},[]),o)?(0,a.jsx)(i.Provider,{value:{theme:r,toggle:()=>{let e="light"===r?"dark":"light";s(e),localStorage.setItem("rizq-theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:t}):(0,a.jsx)(a.Fragment,{children:t})}},9833:function(e,t,r){"use strict";r.d(t,{T:function(){return i}});var a=r(7437);r(2265);var n=r(2943);function i(){let{theme:e,toggle:t}=(0,n.F)();return(0,a.jsx)("button",{id:"theme-toggle",onClick:t,className:"relative w-14 h-7 rounded-full bg-rizq-input-bg border border-rizq-border   transition-all duration-300 ease-in-out   hover:border-rizq-primary focus:outline-none focus:ring-2 focus:ring-rizq-primary/30","aria-label":"light"===e?"Switch to dark mode":"Switch to light mode",children:(0,a.jsxs)("span",{className:"\n          absolute top-0.5 w-6 h-6 rounded-full\n          flex items-center justify-center\n          transition-all duration-300 ease-in-out\n          ".concat("dark"===e?"translate-x-7 bg-indigo-500 shadow-lg shadow-indigo-500/30":"translate-x-0.5 bg-amber-400 shadow-lg shadow-amber-400/30","\n        "),children:[(0,a.jsx)("svg",{className:"w-3.5 h-3.5 text-white transition-all duration-300 ".concat("dark"===e?"opacity-0 rotate-90 scale-0":"opacity-100 rotate-0 scale-100"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}),(0,a.jsx)("svg",{className:"w-3.5 h-3.5 text-white absolute transition-all duration-300 ".concat("dark"===e?"opacity-100 rotate-0 scale-100":"opacity-0 -rotate-90 scale-0"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})]})})}},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5153:function(e,t,r){"use strict";r.d(t,{T:function(){return i}});var a=r(2756);function n(e,t){return(...e)=>{try{return t(...e)}catch{throw Error(void 0)}}}let i=n(0,a.T_);n(0,a.Gb)}},function(e){e.O(0,[756,971,23,744],function(){return e(e.s=8267)}),_N_E=e.O()}]);