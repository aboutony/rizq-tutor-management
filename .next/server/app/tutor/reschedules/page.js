(()=>{var e={};e.id=349,e.ids=[349],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},2254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},7261:e=>{"use strict";e.exports=require("node:util")},5506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l}),r(6094),r(1506),r(5866);var a=r(3191),i=r(8716),o=r(7922),s=r.n(o),n=r(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let l=["",{children:["tutor",{children:["reschedules",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6094)),"E:\\AFKARI\\New Ideas\\RIZQ APP\\rizq-tutor-management\\app\\tutor\\reschedules\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"E:\\AFKARI\\New Ideas\\RIZQ APP\\rizq-tutor-management\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\AFKARI\\New Ideas\\RIZQ APP\\rizq-tutor-management\\app\\tutor\\reschedules\\page.tsx"],u="/tutor/reschedules/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/tutor/reschedules/page",pathname:"/tutor/reschedules",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4512:(e,t,r)=>{Promise.resolve().then(r.bind(r,7722))},7722:(e,t,r)=>{"use strict";r.d(t,{RescheduleList:()=>o});var a=r(326),i=r(7577);function o({initialRequests:e,messages:t}){let[r,o]=(0,i.useState)(e),[s,n]=(0,i.useState)({}),[d,l]=(0,i.useState)(""),c=async(e,r)=>{n(t=>({...t,[e]:!0})),l("");try{if(!(await fetch(`/api/tutor/reschedules/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:r})})).ok)throw Error("Failed to update request");o(t=>t.filter(t=>t.request_id!==e))}catch(e){l(t.common.errors.generic)}finally{n(t=>({...t,[e]:!1}))}};return 0===r.length?a.jsx("p",{className:"text-gray-600 bg-white p-6 rounded-md shadow-sm border",children:t.tutor_flow.reschedules.no_requests}):(0,a.jsxs)("div",{className:"space-y-4",children:[d&&a.jsx("p",{className:"text-sm text-center text-red-600 mb-4",children:d}),r.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("p",{className:"font-bold text-lg text-gray-800",children:[e.lesson_label," - ",e.student_name]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[t.tutor_flow.reschedules.original_time,": ",a.jsx("span",{className:"font-medium line-through",children:new Date(e.original_time_utc).toLocaleString()})]}),(0,a.jsxs)("p",{children:[t.tutor_flow.reschedules.proposed_time,": ",a.jsx("span",{className:"font-medium text-indigo-600",children:new Date(e.proposed_time_utc).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[a.jsx("button",{onClick:()=>c(e.request_id,"decline"),disabled:s[e.request_id],className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 disabled:opacity-50",children:t.common.actions.decline}),a.jsx("button",{onClick:()=>c(e.request_id,"approve"),disabled:s[e.request_id],className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 disabled:opacity-50",children:s[e.request_id]?t.common.loading:t.common.actions.approve})]})]},e.request_id))]})}},6094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(9510),i=r(446),o=r(8569),s=r(9316),n=r(8700),d=r(7913),l=r(8570);let c=(0,l.createProxy)(String.raw`E:\AFKARI\New Ideas\RIZQ APP\rizq-tutor-management\app\tutor\reschedules\RescheduleList.tsx`),{__esModule:u,$$typeof:p}=c;c.default;let m=(0,l.createProxy)(String.raw`E:\AFKARI\New Ideas\RIZQ APP\rizq-tutor-management\app\tutor\reschedules\RescheduleList.tsx#RescheduleList`),h=(e="en")=>"ar"===e?n:"fr"===e?d:s;async function f(){let e=await (0,i._)(),t=h();if(!e)return null;let r=await (0,o.f)(e);return a.jsx("main",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:t.tutor_flow.reschedules.title}),a.jsx(m,{initialRequests:r,messages:t})]})})}},446:(e,t,r)=>{"use strict";r.d(t,{_:()=>s,c:()=>o});var a=r(1615),i=r(6176);async function o(){let e=(0,a.cookies)(),t=e.get("rizq_session")?.value;if(!t)return null;try{let e=new TextEncoder().encode(process.env.JWT_SECRET||"default-secret-key-for-dev"),{payload:r}=await i._(t,e),a=r.userId||r.tutorId||null,o=r.role||"TUTOR",s=r.locale||"en";if(!a)return null;return{userId:a,role:o,locale:s}}catch(e){return console.error("JWT Verification Error:",e),null}}async function s(){let e=await o();return e&&"TUTOR"===e.role?e.userId:null}},6176:(e,t,r)=>{"use strict";r.d(t,{_:()=>A});var a=r(2635),i=r(6005),o=r(7261),s=r(6042),n=r(2690),d=r(7682),l=r(3194);let c=(0,o.promisify)(i.verify),u=async(e,t,r,a)=>{let o=(0,l.Z)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,d.Z)(e,o,a);try{return i.timingSafeEqual(r,t)}catch{return!1}}let u=(0,s.Z)(e),p=(0,n.Z)(e,o);try{return await c(u,a,p,r)}catch{return!1}};var p=r(5547),m=r(1079),h=r(5689),f=r(5165),y=r(7219),w=r(1884);let x=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var g=r(7735);let b=e=>e.d?(0,i.createPrivateKey)({format:"jwk",key:e}):(0,i.createPublicKey)({format:"jwk",key:e});async function v(e,t){if(!(0,f.Z)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,a.Jx)(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new p.jq('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return b({...e,alg:t});default:throw new p.jq('Unsupported "kty" (Key Type) Parameter value')}}async function _(e,t,r){let i,o;if(!(0,f.Z)(e))throw new p.GW("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new p.GW('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new p.GW("JWS Protected Header incorrect type");if(void 0===e.payload)throw new p.GW("JWS Payload missing");if("string"!=typeof e.signature)throw new p.GW("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,f.Z)(e.header))throw new p.GW("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{let t=(0,a.Jx)(e.protected);s=JSON.parse(m.xv.decode(t))}catch{throw new p.GW("JWS Protected Header is invalid")}if(!(0,h.Z)(s,e.header))throw new p.GW("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...s,...e.header},d=(0,w.Z)(p.GW,new Map([["b64",!0]]),r?.crit,s,n),l=!0;if(d.has("b64")&&"boolean"!=typeof(l=s.b64))throw new p.GW('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:c}=n;if("string"!=typeof c||!c)throw new p.GW('JWS "alg" (Algorithm) Header Parameter missing or invalid');let b=r&&x("algorithms",r.algorithms);if(b&&!b.has(c))throw new p.FP('"alg" (Algorithm) Header Parameter value not allowed');if(l){if("string"!=typeof e.payload)throw new p.GW("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new p.GW("JWS Payload must be a string or an Uint8Array instance");let _=!1;"function"==typeof t?(t=await t(s,e),_=!0,(0,y.Y)(c,t,"verify"),(0,g.x)(t)&&(t=await v(t,c))):(0,y.Y)(c,t,"verify");let S=(0,m.zo)(m.g7.encode(e.protected??""),m.g7.encode("."),"string"==typeof e.payload?m.g7.encode(e.payload):e.payload);try{i=(0,a.Jx)(e.signature)}catch{throw new p.GW("Failed to base64url decode the signature")}if(!await u(c,t,i,S))throw new p.nx;if(l)try{o=(0,a.Jx)(e.payload)}catch{throw new p.GW("Failed to base64url decode the payload")}else o="string"==typeof e.payload?m.g7.encode(e.payload):e.payload;let P={payload:o};return(void 0!==e.protected&&(P.protectedHeader=s),void 0!==e.header&&(P.unprotectedHeader=e.header),_)?{...P,key:t}:P}async function S(e,t,r){if(e instanceof Uint8Array&&(e=m.xv.decode(e)),"string"!=typeof e)throw new p.GW("Compact JWS must be a string or Uint8Array");let{0:a,1:i,2:o,length:s}=e.split(".");if(3!==s)throw new p.GW("Invalid Compact JWS");let n=await _({payload:i,protected:a,signature:o},t,r),d={payload:n.payload,protectedHeader:n.protectedHeader};return"function"==typeof t?{...d,key:n.key}:d}var P=r(2741),k=r(1301);let W=e=>e.toLowerCase().replace(/^application\//,""),q=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),j=(e,t,r={})=>{let a,i;try{a=JSON.parse(m.xv.decode(t))}catch{}if(!(0,f.Z)(a))throw new p.uv("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||W(e.typ)!==W(o)))throw new p.YS('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:s=[],issuer:n,subject:d,audience:l,maxTokenAge:c}=r,u=[...s];for(let e of(void 0!==c&&u.push("iat"),void 0!==l&&u.push("aud"),void 0!==d&&u.push("sub"),void 0!==n&&u.push("iss"),new Set(u.reverse())))if(!(e in a))throw new p.YS(`missing required "${e}" claim`,a,e,"missing");if(n&&!(Array.isArray(n)?n:[n]).includes(a.iss))throw new p.YS('unexpected "iss" claim value',a,"iss","check_failed");if(d&&a.sub!==d)throw new p.YS('unexpected "sub" claim value',a,"sub","check_failed");if(l&&!q(a.aud,"string"==typeof l?[l]:l))throw new p.YS('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=(0,k.Z)(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,y=(0,P.Z)(h||new Date);if((void 0!==a.iat||c)&&"number"!=typeof a.iat)throw new p.YS('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new p.YS('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>y+i)throw new p.YS('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new p.YS('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=y-i)throw new p.fy('"exp" claim timestamp check failed',a,"exp","check_failed")}if(c){let e=y-a.iat;if(e-i>("number"==typeof c?c:(0,k.Z)(c)))throw new p.fy('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-i)throw new p.YS('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a};async function A(e,t,r){let a=await S(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new p.uv("JWTs MUST NOT use unencoded payload");let i={payload:j(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...i,key:a.key}:i}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,471,615,883,708,774],()=>r(5506));module.exports=a})();