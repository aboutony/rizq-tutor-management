(()=>{var e={};e.id=271,e.ids=[271],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},2254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},7261:e=>{"use strict";e.exports=require("node:util")},1292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(4506),r(1506),r(5866);var a=r(3191),o=r(8716),i=r(7922),n=r.n(i),s=r(5231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c=["",{children:["tutor",{children:["log",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4506)),"E:\\AFKARI\\New Ideas\\RIZQ APP\\rizq-tutor-management\\app\\tutor\\log\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"E:\\AFKARI\\New Ideas\\RIZQ APP\\rizq-tutor-management\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\AFKARI\\New Ideas\\RIZQ APP\\rizq-tutor-management\\app\\tutor\\log\\page.tsx"],u="/tutor/log/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/tutor/log/page",pathname:"/tutor/log",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6276:(e,t,r)=>{Promise.resolve().then(r.bind(r,4906))},4906:(e,t,r)=>{"use strict";r.d(t,{LessonLogList:()=>i});var a=r(326),o=r(7577);function i({initialLessons:e,messages:t}){let[r,i]=(0,o.useState)(e),[n,s]=(0,o.useState)({}),[l,c]=(0,o.useState)(""),d=async e=>{s(t=>({...t,[e]:!0})),c("");try{if(!(await fetch(`/api/tutor/lessons/${e}/complete`,{method:"POST"})).ok)throw Error("Failed to mark as complete");i(t=>t.map(t=>t.id===e?{...t,status:"completed"}:t))}catch(e){c(t.common.errors.generic)}finally{s(t=>({...t,[e]:!1}))}};return 0===r.length?a.jsx("p",{className:"text-gray-600 bg-white p-6 rounded-md shadow-sm border",children:t.tutor_flow.lesson_log_page.no_lessons}):(0,a.jsxs)("div",{className:"space-y-4",children:[l&&a.jsx("p",{className:"text-sm text-center text-red-600 mb-4",children:l}),r.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("p",{className:"font-bold text-lg text-gray-800",children:[e.lesson_label," - ",e.student_name]}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.confirmed_start_at_utc).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:t.tutor_flow.lesson_log_page.status[e.status]}),"confirmed"===e.status&&a.jsx("button",{onClick:()=>d(e.id),disabled:n[e.id],className:"px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50",children:n[e.id]?t.common.loading:t.tutor_flow.lesson_log_page.actions.mark_complete})]})]},e.id))]})}},4506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(9510),o=r(446),i=r(8569),n=r(9316),s=r(8700),l=r(7913),c=r(8570);let d=(0,c.createProxy)(String.raw`E:\AFKARI\New Ideas\RIZQ APP\rizq-tutor-management\app\tutor\log\LessonLogList.tsx`),{__esModule:u,$$typeof:p}=d;d.default;let m=(0,c.createProxy)(String.raw`E:\AFKARI\New Ideas\RIZQ APP\rizq-tutor-management\app\tutor\log\LessonLogList.tsx#LessonLogList`),f=(e="en")=>"ar"===e?s:"fr"===e?l:n;async function h(){let e=await (0,o._)(),t=f();if(!e)return null;let r=await (0,i.X4)(e);return a.jsx("main",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:t.tutor_flow.lesson_log_page.title}),a.jsx(m,{initialLessons:r,messages:t})]})})}},446:(e,t,r)=>{"use strict";r.d(t,{_:()=>n,c:()=>i});var a=r(1615),o=r(6176);async function i(){let e=(0,a.cookies)(),t=e.get("rizq_session")?.value;if(!t)return null;try{let e=new TextEncoder().encode(process.env.JWT_SECRET||"default-secret-key-for-dev"),{payload:r}=await o._(t,e),a=r.userId||r.tutorId||null,i=r.role||"TUTOR",n=r.locale||"en";if(!a)return null;return{userId:a,role:i,locale:n}}catch(e){return console.error("JWT Verification Error:",e),null}}async function n(){let e=await i();return e&&"TUTOR"===e.role?e.userId:null}},6176:(e,t,r)=>{"use strict";r.d(t,{_:()=>J});var a=r(2635),o=r(6005),i=r(7261),n=r(6042),s=r(2690),l=r(7682),c=r(3194);let d=(0,i.promisify)(o.verify),u=async(e,t,r,a)=>{let i=(0,c.Z)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,l.Z)(e,i,a);try{return o.timingSafeEqual(r,t)}catch{return!1}}let u=(0,n.Z)(e),p=(0,s.Z)(e,i);try{return await d(u,a,p,r)}catch{return!1}};var p=r(5547),m=r(1079),f=r(5689),h=r(5165),y=r(7219),w=r(1884);let g=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var x=r(7735);let b=e=>e.d?(0,o.createPrivateKey)({format:"jwk",key:e}):(0,o.createPublicKey)({format:"jwk",key:e});async function v(e,t){if(!(0,h.Z)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,a.Jx)(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new p.jq('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return b({...e,alg:t});default:throw new p.jq('Unsupported "kty" (Key Type) Parameter value')}}async function _(e,t,r){let o,i;if(!(0,h.Z)(e))throw new p.GW("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new p.GW('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new p.GW("JWS Protected Header incorrect type");if(void 0===e.payload)throw new p.GW("JWS Payload missing");if("string"!=typeof e.signature)throw new p.GW("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,h.Z)(e.header))throw new p.GW("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{let t=(0,a.Jx)(e.protected);n=JSON.parse(m.xv.decode(t))}catch{throw new p.GW("JWS Protected Header is invalid")}if(!(0,f.Z)(n,e.header))throw new p.GW("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let s={...n,...e.header},l=(0,w.Z)(p.GW,new Map([["b64",!0]]),r?.crit,n,s),c=!0;if(l.has("b64")&&"boolean"!=typeof(c=n.b64))throw new p.GW('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:d}=s;if("string"!=typeof d||!d)throw new p.GW('JWS "alg" (Algorithm) Header Parameter missing or invalid');let b=r&&g("algorithms",r.algorithms);if(b&&!b.has(d))throw new p.FP('"alg" (Algorithm) Header Parameter value not allowed');if(c){if("string"!=typeof e.payload)throw new p.GW("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new p.GW("JWS Payload must be a string or an Uint8Array instance");let _=!1;"function"==typeof t?(t=await t(n,e),_=!0,(0,y.Y)(d,t,"verify"),(0,x.x)(t)&&(t=await v(t,d))):(0,y.Y)(d,t,"verify");let S=(0,m.zo)(m.g7.encode(e.protected??""),m.g7.encode("."),"string"==typeof e.payload?m.g7.encode(e.payload):e.payload);try{o=(0,a.Jx)(e.signature)}catch{throw new p.GW("Failed to base64url decode the signature")}if(!await u(d,t,o,S))throw new p.nx;if(c)try{i=(0,a.Jx)(e.payload)}catch{throw new p.GW("Failed to base64url decode the payload")}else i="string"==typeof e.payload?m.g7.encode(e.payload):e.payload;let P={payload:i};return(void 0!==e.protected&&(P.protectedHeader=n),void 0!==e.header&&(P.unprotectedHeader=e.header),_)?{...P,key:t}:P}async function S(e,t,r){if(e instanceof Uint8Array&&(e=m.xv.decode(e)),"string"!=typeof e)throw new p.GW("Compact JWS must be a string or Uint8Array");let{0:a,1:o,2:i,length:n}=e.split(".");if(3!==n)throw new p.GW("Invalid Compact JWS");let s=await _({payload:o,protected:a,signature:i},t,r),l={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...l,key:s.key}:l}var P=r(2741),k=r(1301);let W=e=>e.toLowerCase().replace(/^application\//,""),A=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),j=(e,t,r={})=>{let a,o;try{a=JSON.parse(m.xv.decode(t))}catch{}if(!(0,h.Z)(a))throw new p.uv("JWT Claims Set must be a top-level JSON object");let{typ:i}=r;if(i&&("string"!=typeof e.typ||W(e.typ)!==W(i)))throw new p.YS('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:n=[],issuer:s,subject:l,audience:c,maxTokenAge:d}=r,u=[...n];for(let e of(void 0!==d&&u.push("iat"),void 0!==c&&u.push("aud"),void 0!==l&&u.push("sub"),void 0!==s&&u.push("iss"),new Set(u.reverse())))if(!(e in a))throw new p.YS(`missing required "${e}" claim`,a,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(a.iss))throw new p.YS('unexpected "iss" claim value',a,"iss","check_failed");if(l&&a.sub!==l)throw new p.YS('unexpected "sub" claim value',a,"sub","check_failed");if(c&&!A(a.aud,"string"==typeof c?[c]:c))throw new p.YS('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":o=(0,k.Z)(r.clockTolerance);break;case"number":o=r.clockTolerance;break;case"undefined":o=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,y=(0,P.Z)(f||new Date);if((void 0!==a.iat||d)&&"number"!=typeof a.iat)throw new p.YS('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new p.YS('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>y+o)throw new p.YS('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new p.YS('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=y-o)throw new p.fy('"exp" claim timestamp check failed',a,"exp","check_failed")}if(d){let e=y-a.iat;if(e-o>("number"==typeof d?d:(0,k.Z)(d)))throw new p.fy('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-o)throw new p.YS('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a};async function J(e,t,r){let a=await S(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new p.uv("JWTs MUST NOT use unencoded payload");let o={payload:j(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...o,key:a.key}:o}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,471,615,883,708,774],()=>r(1292));module.exports=a})();